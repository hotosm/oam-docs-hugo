<!DOCTYPE html>
<html><head>
   <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
   <link href="https://fonts.googleapis.com/css?family=Archivo" rel="stylesheet"> 
   <link href="https://fonts.googleapis.com/css?family=Barlow+Condensed" rel="stylesheet">
   <script src="../../js/vendor/lunr/lunr.min.js"></script>
   
   
   
   
   <link rel="stylesheet" href="../../scss/main.css">
   <title>OpenAerialMap Docs</title>
</head><body data-site-url='https://docs.openaerialmap.org'   ><header class="header" >
    <div class="header__container">
        <img src="https://docs.openaerialmap.org/svg/hot-logo-red.svg" alt="hot logo"><a href="https://docs.openaerialmap.org" class="no-underline"><h4 class="title site-title">OpenAerialMap Docs</h4></a>
        <div>
        
    </div><ul class="browse-select-options browse-select-options--hidden js-browse-select-options">

</ul></div>
        
        <a class="hotosm-link" href="https://hotosm.org">hotosm.org</a> 
        <div class="hamburger-icon"></div>
    </div>
</header>

<div class="main">
    <aside class="menu">
        <div class="menu__container">


<h2 class="title">OpenAerialMap Docs</h2> 






<input class="search" type="text" placeholder="Search documentation">
<div class="search-results">
    <ul class="results-list"></ul>
</div>





    
        <div class="
        
        accordion accordion--open
        
        ">
            Ecosystem
        </div>
        <div class="panel
        
        panel--open
        ">
                <ul class="page-list">
                    
                        <li class="page"><a href="../../ecosystem/getting-started/" class="menu-link">Getting Started</a></li>
                    
                        <li class="page"><a href="../../ecosystem/imagery-data/" class="menu-link">Data Structure</a></li>
                    
                        <li class="page"><a href="../../ecosystem/catalog-group/" class="menu-link">Catalog Group</a></li>
                    
                        <li class="page"><a href="../../ecosystem/contributors-group/" class="menu-link">Contributors Group</a></li>
                    
                        <li class="page"><a href="../../ecosystem/roll-your-own/" class="menu-link menu-link--active">Roll Your Own</a></li>
                    
                </ul>
            </div>
    
        <div class="
        
        accordion accordion--closed
        
        ">
            Catalog
        </div>
        <div class="panel
        
        panel--closed
        ">
                <ul class="page-list">
                    
                        <li class="page"><a href="../../api/api/" class="menu-link">OAM API</a></li>
                    
                </ul>
            </div>
    
        <div class="
        
        accordion accordion--closed
        
        ">
            OAM Browser
        </div>
        <div class="panel
        
        panel--closed
        ">
                <ul class="page-list">
                    
                        <li class="page"><a href="../../browser/getting-started/" class="menu-link">Getting Started</a></li>
                    
                        <li class="page"><a href="../../browser/user-guide/" class="menu-link">User Guide</a></li>
                    
                </ul>
            </div>
    
        <div class="
        
        accordion accordion--closed
        
        ">
            Uploader
        </div>
        <div class="panel
        
        panel--closed
        ">
                <ul class="page-list">
                    
                        <li class="page"><a href="../../uploader/getting-started/" class="menu-link">Getting Started</a></li>
                    
                        <li class="page"><a href="../../uploader/api-server/" class="menu-link">Api Server</a></li>
                    
                        <li class="page"><a href="../../uploader/uploader-form/" class="menu-link">Uploader Form</a></li>
                    
                </ul>
            </div>
    
        <div class="
        
        accordion accordion--closed
        
        ">
            Tiler
        </div>
        <div class="panel
        
        panel--closed
        ">
                <ul class="page-list">
                    
                        <li class="page"><a href="../../tiler/tiler/" class="menu-link">Tiler</a></li>
                    
                </ul>
            </div>
    

<a class="pdf-download"  
    
    href="../../pdfs/OpenAerialMap_Docs.pdf">
    

    <div>
        <div class="title">Download the entire file</div>
        <div class="sub-title sub-title-12">pdf</div>
    </div>
</a></div>
    </aside>
    <main class="article"><div class="article__container">

 
   <div class="git-info">
<div class="">
  
  <div>
    
    <a href="https://github.com/hotosm/oam-docs-hugo/commit/e53b8cc6c3120f09ebfa657ec39c68a92e842707" class="sub-title sub-title-14" title='Last modified August 2, 2023 by dqunbp' target="_blank" rel="noopener">
      Last modified: August 2, 2023
    </a>
  </div>
  
</div>
</div>
    <div class="article-body">
           <h1 class="page-title">Roll Your Own</h1><p>For development purposes, you can roll parts of OpenAerialMap locally. Detailed docs exist in the README section of each component. This document is an overview of the interdependencies and configuring the development environment as a functional whole.</p>
<h1 id="development-requirements">Development Requirements</h1>
<ul>
<li>
<p>It will be necessary to use <a href="https://github.com/creationix/nvm">nvm</a> during development - some applications will need Node v4, others will use Node v0.12</p>
</li>
<li>
<p>In some components (the web frontends) configuration variables can be added to <code>app/assets/scripts/config/local.js</code>, and will override any other references to the config object throughout the project. You would have use the point to a local API URL by adding the following to the configuration files in each of the apps:</p>
</li>
</ul>
<pre tabindex="0"><code>module.exports = {
  OAMUploaderApi: &#39;http://localhost:4000&#39;
};
</code></pre><ul>
<li>
<p>Server applications such as the Catalog API and Uploader API need to have environment variables set before starting them. Please refer to the list of environment variables listed in the README docs in the code repositories.</p>
</li>
<li>
<p>Certain components require the installation of third party libraries and applications (such as MongoDB). Refer to the list of dependencies in the READMEs.</p>
</li>
<li>
<p>OpenAerialMap is a catalog of images stored on the Open Imagery Network. OIN is a specification and a set of imagery buckets provided under a free license. The OAM Catalog reads a file (the registry) to determine which buckets to index in order to form the catalog. The OAM Uploader pushes data to a specific registered bucket (the OpenAerialMap bucket). Since the Catalog and Uploader depend on the Open Imagery Network, you will have to replicate OIN locally. This means having an <a href="https://aws.amazon.com/s3/">Amazon S3</a> bucket available for development, as well as creating a hosted register file for the Catalog API to read (see further details below).</p>
</li>
</ul>
<h1 id="list-of-components">List of components</h1>
<h2 id="the-oam-uploader-ecosystem">The OAM uploader ecosystem</h2>
<p>At a high-level, the OAM uploader software ecosystem consists of three GitHub repositories housing the <a href="https://github.com/hotosm/oam-uploader-api">API</a>, the <a href="https://github.com/hotosm/oam-uploader-admin">administrative panel</a>, and the front-end <a href="https://github.com/hotosm/oam-uploader">uploader form</a>.</p>
<h3 id="the-uploader-api">The Uploader API</h3>
<p>The API provides the endpoints used by the upload submission form, adding image URLs and metadata to the processing queue database, checking the status of a user&rsquo;s uploads, and checking the status of specific uploads.</p>
<p>Finally, it manages a queue of images by checking for new submissions to the database at regular intervals, downloading them, processing them to a standardized TIFF specification, generating metadata and thumbnails, and uploading them to an Amazon S3 bucket.</p>
<ul>
<li>
<p>When launching the API, several environment variables must be set. We suggest that you duplicate <code>local.sample.env</code> to <code>local.env</code> and fill in the data. Contact a maintainer for the full AWS credentials and database paths.</p>
</li>
<li>
<p>You will need an Amazon S3 bucket to test uploads.</p>
</li>
<li>
<p>To run, load the variables with <code>source local.env</code> and start the app with <code>npm start</code>.</p>
</li>
</ul>
<h3 id="the-imagery-uploader">The Imagery Uploader</h3>
<p><em>This web application depends on the Uploader API</em></p>
<p>This repo contains the front-end form which allows authenticated users to publish images to the processing queue, and to check the processing status of submitted tasks.</p>
<p>It depends on a connection to the API in order to submit datasets and associated metadata to the processing queue and check upload status. As described above, this page depends on the API for most of its functionality.</p>
<h2 id="the-oam-catalog-ecosystem">The OAM catalog ecosystem</h2>
<p>The OAM catalog software ecosystem consists of three GitHub repositories housing the <a href="https://github.com/hotosm/oam-api">API</a>, the <a href="https://github.com/hotosm/oam-browser">Imagery Browser</a>, and the <a href="https://github.com/hotosm/openaerialmap.org">OAM Landing Page</a>.</p>
<h3 id="the-catalog-api">The Catalog API</h3>
<p>The API provides the endpoints for browsing the available indexed imagery which feeds into the Imagery Browser. Other routes provide statistics that power the OpenAerialMap homepage.</p>
<p>This code repository also contains a worker that can index Open Imagery Network metadata from Amazon S3 buckets. The worker first reads the &ldquo;OIN Register File&rdquo; to determine which buckets it needs to read and process.</p>
<ul>
<li>If you want to catalog data that is not available in the Open Imagery Network, provide an environment variable that points to a hosted register file <a href="https://github.com/openimagerynetwork/oin-register/blob/master/master.json">in the same format</a>. You will also have to store the data in an Amazon S3 bucket using the <a href="https://github.com/openimagerynetwork/oin-metadata-spec">OIN specification</a>.</li>
</ul>
<h3 id="the-imagery-browser">The Imagery Browser</h3>
<p><em>This web application depends on the Catalog API</em></p>
<p>The Imagery Browser visualizes the data available in the catalog by polling the OAM Catalog API. It provides views such as latest uploaded imagery, imagery from different periods in time and different resolutions. The imagery is also downloadable.</p>
<h3 id="the-openaerialmap-landing-page">The OpenAerialMap Landing Page</h3>
<p><em>This web application depends on the Catalog API</em></p>
<p>The website landing page shows latest imagery available in the catalog as well as statistics such as number of images catalogued and number of providers.</p>
</div>




    
     
    

    

    

    

    







</div></main>
    <aside class="toc"><div class="toc__container">
    
    
    
    
    <div class="toc-list">
        <h4 class="sub-title sub-title-10">ON THIS PAGE</h4>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#the-oam-uploader-ecosystem">The OAM uploader ecosystem</a>
      <ul>
        <li><a href="#the-uploader-api">The Uploader API</a></li>
        <li><a href="#the-imagery-uploader">The Imagery Uploader</a></li>
      </ul>
    </li>
    <li><a href="#the-oam-catalog-ecosystem">The OAM catalog ecosystem</a>
      <ul>
        <li><a href="#the-catalog-api">The Catalog API</a></li>
        <li><a href="#the-imagery-browser">The Imagery Browser</a></li>
        <li><a href="#the-openaerialmap-landing-page">The OpenAerialMap Landing Page</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    <hr class="toc-divider">
    
    
    <a href="https://github.com/hotosm/oam-docs-hugo/edit/master/content/ecosystem/roll-your-own.md" class="sub-title sub-title-12 toc-item"> <img src="../../svg/pencil.svg" class="edit-icon" alt="">Edit this page on Github</a>
    <a 
    
    href="../../pdfs/roll-your-own.pdf"
    
    class="sub-title sub-title-12 toc-item"> <img src="../../svg/download.svg" class="download-icon" alt="">Download this page</a>
</div></aside>
</div>
<script src="../../js/main.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/toc.js"></script>


<div id="optout-form" ></div>
<script type="application/javascript">var site_id = "26"</script>
<script type="application/javascript" src="https://cdn.hotosm.org/tracking-v3.js"></script>

</body>
</html>
